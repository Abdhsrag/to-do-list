class Task{constructor(e,t=!1){this.text=e,this.completed=t}toggleCompletion(){this.completed=!this.completed}}class TaskManager{constructor(){this.tasks=[],this.taskListElement=document.getElementById("taskList"),this.newTaskInput=document.getElementById("taskInput"),this.addButton=document.getElementById("addButton"),this.clearButton=document.getElementById("clearButton"),this.addPopUp=document.getElementById("addPopUp"),this.deletePopUp=document.getElementById("deletePopUp"),this.updatePopUp=document.getElementById("updatePopUp"),this.completePopUp=document.getElementById("completePopUp"),this.clearPopUp=document.getElementById("clearPopUp"),this.loadTasks(),this.addButton.addEventListener("click",()=>this.addTask()),this.clearButton.addEventListener("click",()=>this.clearTasks())}addTask(){let e=this.newTaskInput.value;if(""!==e){let t=new Task(e);this.tasks.push(t),this.addTaskToList(t),this.newTaskInput.value="",this.showPopup(this.addPopUp),setTimeout(()=>this.addPopUp.classList.remove("show"),2e3),this.saveTasks()}}addTaskToList(e){let t=document.createElement("li"),s=document.createElement("input");s.type="checkbox",s.checked=e.completed,t.appendChild(s);let a=document.createElement("span");a.innerText=e.text,t.appendChild(a),this.updateTaskStyle(a,e.completed),t.addEventListener("mouseover",()=>{t.style.backgroundColor="#f0f0f0",t.classList.add("floating")}),t.addEventListener("mouseout",()=>{t.style.backgroundColor="",t.classList.remove("floating")}),s.addEventListener("change",()=>{e.toggleCompletion(),this.updateTaskStyle(a,e.completed),e.completed&&(this.showPopup(this.completePopUp),setTimeout(()=>this.completePopUp.classList.remove("show"),2e3)),this.saveTasks()});let i=document.createElement("button");i.innerText="Delete",i.setAttribute("id","deleteButton"),t.appendChild(i),i.addEventListener("click",()=>{this.deleteTask(e,t)});let l=document.createElement("button");l.innerText="Update",l.setAttribute("id","updateButton"),t.appendChild(l),l.addEventListener("click",()=>{this.updateTask(e,a,l,t)}),this.taskListElement.appendChild(t)}updateTaskStyle(e,t){e.style.color=t?"#118B50":"#7D0A0A",e.style.textDecoration=t?"line-through":"none"}deleteTask(e,t){this.tasks=this.tasks.filter(t=>t!==e),t.remove(),this.showPopup(this.deletePopUp),setTimeout(()=>this.deletePopUp.classList.remove("show"),2e3),this.saveTasks()}updateTask(e,t,s,a){if("Update"===s.innerText){let i=document.createElement("input");i.type="text",i.value=t.innerText,a.insertBefore(i,t),a.removeChild(t);let l=document.createElement("button");l.innerText="Save",l.setAttribute("id","saveButton"),a.appendChild(l),s.style.display="none",l.addEventListener("click",()=>{""!==i.value&&(e.text=i.value,a.insertBefore(t,i),a.removeChild(i),s.style.display="inline",this.showPopup(this.updatePopUp),setTimeout(()=>this.updatePopUp.classList.remove("show"),2e3),this.saveTasks(),l.style.display="none")})}}clearTasks(){this.tasks=[],this.taskListElement.innerHTML="",this.showPopup(this.clearPopUp),setTimeout(()=>this.clearPopUp.classList.remove("show"),2e3),this.saveTasks()}saveTasks(){localStorage.setItem("tasks",JSON.stringify(this.tasks))}loadTasks(){let e=JSON.parse(localStorage.getItem("tasks"))||[];e.forEach(e=>{let t=new Task(e.text,e.completed);this.tasks.push(t),this.addTaskToList(t)})}showPopup(e){e.classList.add("show")}}document.addEventListener("DOMContentLoaded",()=>{new TaskManager});