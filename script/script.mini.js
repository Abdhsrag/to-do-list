const newTask=document.getElementById("taskInput"),taskList=document.getElementById("taskList"),addButton=document.getElementById("addButton"),clearButton=document.getElementById("clearButton"),addPopUp=document.getElementById("addPopUp"),deletePopUp=document.getElementById("deletePopUp"),updatePopUp=document.getElementById("updatePopUp"),completePopUp=document.getElementById("completePopUp");function saveTasks(){let e=[],t=taskList.getElementsByTagName("li");for(let s of t){let n=s.getElementsByTagName("span")[0].innerText,a=s.getElementsByTagName("input")[0].checked;e.push({text:n,completed:a})}localStorage.setItem("tasks",JSON.stringify(e))}function loadTasks(){let e=JSON.parse(localStorage.getItem("tasks"))||[];e.forEach(e=>{addTaskToList(e.text,e.completed)})}function addTaskToList(e,t){let s=document.createElement("li"),n=document.createElement("input");n.type="checkbox",n.checked=t,s.appendChild(n);let a=document.createElement("span");a.innerText=e,s.appendChild(a),a.style.color=t?"#118B50":"#7D0A0A",a.style.textDecoration=t?"line-through":"none",s.addEventListener("mouseover",()=>{s.style.backgroundColor="#f0f0f0",s.classList.add("floating")}),s.addEventListener("mouseout",()=>{s.style.backgroundColor="",s.classList.remove("floating")}),n.addEventListener("change",()=>{a.style.color=n.checked?"#118B50":"#7D0A0A",a.style.textDecoration=n.checked?"line-through":"none",n.checked&&(showPopup(completePopUp),setTimeout(()=>completePopUp.classList.remove("show"),2e3)),saveTasks()});let o=document.createElement("button");o.setAttribute("id","deleteButton"),o.innerText="Delete",s.appendChild(o),o.addEventListener("click",()=>{s.remove(),showPopup(deletePopUp),setTimeout(()=>deletePopUp.classList.remove("show"),2e3),saveTasks()});let l=document.createElement("button");l.setAttribute("id","updateButton"),l.innerText="Update",s.appendChild(l),l.addEventListener("click",()=>{if("Update"===l.innerText){let e=document.createElement("input");e.type="text",e.value=a.innerText,s.insertBefore(e,a),s.removeChild(a);let t=document.createElement("button");t.innerText="Save",t.style.color="#fff",t.style.backgroundColor="#118B50",t.style.marginLeft="0.5rem",s.appendChild(t),l.style.display="none",t.addEventListener("click",()=>{""!==e.value&&(a.innerText=e.value,s.insertBefore(a,e),s.removeChild(e),l.style.display="inline",t.remove(),showPopup(updatePopUp),setTimeout(()=>updatePopUp.classList.remove("show"),2e3),saveTasks())})}}),taskList.appendChild(s)}function showPopup(e){e.classList.remove("show"),e.offsetWidth,e.classList.add("show")}addButton.addEventListener("click",()=>{""!==newTask.value&&(addTaskToList(newTask.value,!1),newTask.value="",showPopup(addPopUp),setTimeout(()=>addPopUp.classList.remove("show"),2e3),saveTasks())}),clearButton.addEventListener("click",()=>{taskList.innerHTML="",localStorage.removeItem("tasks")}),loadTasks();